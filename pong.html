<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(180deg, #0a0a0a 0%, #1a0a14 50%, #0a0a0a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Bebas Neue', 'Courier New', monospace;
            color: #ff0040;
            overflow: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                repeating-linear-gradient(
                    0deg,
                    rgba(0, 0, 0, 0.15),
                    rgba(0, 0, 0, 0.15) 1px,
                    transparent 1px,
                    transparent 2px
                );
            pointer-events: none;
            z-index: 1;
        }

        #gameCanvas {
            border: 3px solid #ff0040;
            background: #000;
            cursor: none;
            box-shadow:
                0 0 20px rgba(255, 0, 64, 0.5),
                0 0 40px rgba(255, 0, 64, 0.3),
                inset 0 0 60px rgba(255, 0, 64, 0.1);
            position: relative;
            z-index: 2;
        }

        #scoreboard {
            font-size: 72px;
            margin-bottom: 30px;
            letter-spacing: 40px;
            color: #ff0040;
            text-shadow:
                0 0 10px #ff0040,
                0 0 20px #ff0040,
                0 0 30px #ff0040,
                0 0 40px #ff0040,
                0 0 70px #ff0040,
                0 0 80px #ff0040;
            font-weight: bold;
            position: relative;
            z-index: 2;
        }

        #instructions {
            margin-top: 25px;
            text-align: center;
            font-size: 16px;
            color: #ff0040;
            text-shadow:
                0 0 5px #ff0040,
                0 0 10px #ff0040;
            letter-spacing: 2px;
            position: relative;
            z-index: 2;
        }

        .score {
            display: inline-block;
            min-width: 80px;
            text-align: center;
        }

        #muteButton {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: #ff0040;
            border: 2px solid #ff0040;
            padding: 12px 24px;
            font-family: 'Bebas Neue', 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow:
                0 0 10px rgba(255, 0, 64, 0.5),
                inset 0 0 10px rgba(255, 0, 64, 0.1);
            letter-spacing: 2px;
            z-index: 3;
        }

        #muteButton:hover {
            background: rgba(255, 0, 64, 0.2);
            box-shadow:
                0 0 20px rgba(255, 0, 64, 0.8),
                inset 0 0 20px rgba(255, 0, 64, 0.2);
        }

        #muteButton.muted {
            background: rgba(100, 0, 20, 0.8);
            color: #ff6b9d;
        }
    </style>
</head>
<body>
    <button id="muteButton">ðŸ”Š MUSIC ON</button>
    <div id="scoreboard">
        <span class="score" id="playerScore">0</span>
        <span>-</span>
        <span class="score" id="computerScore">0</span>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div id="instructions">
        Use Arrow Keys (Up/Down) or Mouse to control left paddle<br>
        First to 5 wins! Press SPACE or ENTER to restart after game over.
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // 90s Style Music Generator
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let isMuted = false;

        // Create master gain for volume control
        const masterGain = audioCtx.createGain();
        masterGain.gain.value = 0.3;
        masterGain.connect(audioCtx.destination);

        // 90s arcade-style melody notes (C major scale pentatonic)
        const melody = [
            { note: 523.25, duration: 0.2 },  // C5
            { note: 659.25, duration: 0.2 },  // E5
            { note: 783.99, duration: 0.2 },  // G5
            { note: 659.25, duration: 0.2 },  // E5
            { note: 523.25, duration: 0.2 },  // C5
            { note: 587.33, duration: 0.2 },  // D5
            { note: 659.25, duration: 0.4 },  // E5
            { note: 523.25, duration: 0.2 },  // C5
            { note: 659.25, duration: 0.2 },  // E5
            { note: 783.99, duration: 0.2 },  // G5
            { note: 880.00, duration: 0.2 },  // A5
            { note: 783.99, duration: 0.2 },  // G5
            { note: 659.25, duration: 0.2 },  // E5
            { note: 523.25, duration: 0.4 }   // C5
        ];

        // Bass notes
        const bass = [261.63, 196.00, 220.00, 246.94]; // C4, G3, A3, B3

        let melodyIndex = 0;
        let bassIndex = 0;

        function playNote(frequency, duration, waveType = 'square') {
            if (isMuted) return;

            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            oscillator.type = waveType;
            oscillator.frequency.value = frequency;

            gainNode.gain.value = 0.1;
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);

            oscillator.connect(gainNode);
            gainNode.connect(masterGain);

            oscillator.start(audioCtx.currentTime);
            oscillator.stop(audioCtx.currentTime + duration);
        }

        function playMelody() {
            const note = melody[melodyIndex];
            playNote(note.note, note.duration, 'square');

            melodyIndex = (melodyIndex + 1) % melody.length;

            setTimeout(playMelody, note.duration * 1000);
        }

        function playBass() {
            const frequency = bass[bassIndex];
            playNote(frequency, 0.4, 'triangle');

            bassIndex = (bassIndex + 1) % bass.length;

            setTimeout(playBass, 400);
        }

        // Mute button handler
        const muteButton = document.getElementById('muteButton');
        muteButton.addEventListener('click', () => {
            isMuted = !isMuted;
            if (isMuted) {
                muteButton.textContent = 'ðŸ”‡ MUSIC OFF';
                muteButton.classList.add('muted');
                masterGain.gain.value = 0;
            } else {
                muteButton.textContent = 'ðŸ”Š MUSIC ON';
                muteButton.classList.remove('muted');
                masterGain.gain.value = 0.3;
            }
        });

        // Start the music
        setTimeout(() => {
            playMelody();
            playBass();
        }, 100);

        // Game objects
        const game = {
            playerScore: 0,
            computerScore: 0,
            maxScore: 5,
            isOver: false,
            isPaused: false
        };

        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 8,
            speedX: 5,
            speedY: 5,
            maxSpeed: 12
        };

        const paddleWidth = 12;
        const paddleHeight = 100;

        const player = {
            x: 20,
            y: canvas.height / 2 - paddleHeight / 2,
            width: paddleWidth,
            height: paddleHeight,
            speed: 8
        };

        const computer = {
            x: canvas.width - 20 - paddleWidth,
            y: canvas.height / 2 - paddleHeight / 2,
            width: paddleWidth,
            height: paddleHeight,
            speed: 6
        };

        // Input handling
        const keys = {
            up: false,
            down: false
        };

        let mouseY = canvas.height / 2;
        let usingKeyboard = false;

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowUp') {
                keys.up = true;
                usingKeyboard = true;
            }
            if (e.key === 'ArrowDown') {
                keys.down = true;
                usingKeyboard = true;
            }
            if ((e.key === ' ' || e.key === 'Enter') && game.isOver) {
                e.preventDefault();
                resetGame();
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowUp') keys.up = false;
            if (e.key === 'ArrowDown') keys.down = false;
        });

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseY = e.clientY - rect.top;
            usingKeyboard = false;
        });

        // Draw functions with Stranger Things neon glow
        function drawRect(x, y, width, height, color) {
            // Outer glow
            ctx.shadowBlur = 20;
            ctx.shadowColor = color;
            ctx.fillStyle = color;
            ctx.fillRect(x, y, width, height);

            // Extra glow layers
            ctx.shadowBlur = 40;
            ctx.fillRect(x, y, width, height);

            ctx.shadowBlur = 0;
        }

        function drawCircle(x, y, radius, color) {
            // Outer glow
            ctx.shadowBlur = 25;
            ctx.shadowColor = color;
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();

            // Extra glow
            ctx.shadowBlur = 45;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();

            ctx.shadowBlur = 0;
        }

        function drawNet() {
            const netWidth = 2;
            const netHeight = 10;
            const gap = 15;

            ctx.shadowBlur = 10;
            ctx.shadowColor = '#ff0040';
            ctx.fillStyle = '#ff0040';

            for (let i = 0; i < canvas.height; i += netHeight + gap) {
                ctx.fillRect(canvas.width / 2 - netWidth / 2, i, netWidth, netHeight);
            }

            ctx.shadowBlur = 0;
        }

        function draw() {
            // Clear canvas with solid black
            ctx.shadowBlur = 0;
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw net
            drawNet();

            // Draw paddles with neon red glow
            drawRect(player.x, player.y, player.width, player.height, '#ff0040');
            drawRect(computer.x, computer.y, computer.width, computer.height, '#ff0040');

            // Draw ball with bright cyan/pink glow
            drawCircle(ball.x, ball.y, ball.radius, '#ff6b9d');

            // Draw game over screen
            if (game.isOver) {
                ctx.shadowBlur = 0;
                ctx.fillStyle = 'rgba(0, 0, 0, 0.85)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Winner text with intense glow
                ctx.fillStyle = '#ff0040';
                ctx.font = 'bold 64px "Bebas Neue"';
                ctx.textAlign = 'center';
                ctx.shadowBlur = 30;
                ctx.shadowColor = '#ff0040';

                const winner = game.playerScore >= game.maxScore ? 'PLAYER WINS!' : 'COMPUTER WINS!';
                ctx.fillText(winner, canvas.width / 2, canvas.height / 2 - 40);

                // Restart instruction
                ctx.font = '28px "Bebas Neue"';
                ctx.shadowBlur = 20;
                ctx.fillText('Press SPACE or ENTER to restart', canvas.width / 2, canvas.height / 2 + 40);

                ctx.shadowBlur = 0;
            }
        }

        // Update game logic
        function update() {
            // Skip update if game is over
            if (game.isOver) return;

            // Move player paddle with keyboard OR mouse (not both)
            if (usingKeyboard) {
                if (keys.up && player.y > 0) {
                    player.y -= player.speed;
                }
                if (keys.down && player.y < canvas.height - player.height) {
                    player.y += player.speed;
                }
            } else {
                // Move player paddle with mouse
                const targetY = mouseY - player.height / 2;
                if (Math.abs(targetY - player.y) > 2) {
                    if (targetY > player.y && player.y < canvas.height - player.height) {
                        player.y += player.speed;
                    } else if (targetY < player.y && player.y > 0) {
                        player.y -= player.speed;
                    }
                }
            }

            // Computer AI - follows ball with some delay
            const computerCenter = computer.y + computer.height / 2;
            const ballCenter = ball.y;

            if (ballCenter < computerCenter - 35) {
                computer.y -= computer.speed;
            } else if (ballCenter > computerCenter + 35) {
                computer.y += computer.speed;
            }

            // Keep computer paddle in bounds
            if (computer.y < 0) computer.y = 0;
            if (computer.y > canvas.height - computer.height) {
                computer.y = canvas.height - computer.height;
            }

            // Move ball
            ball.x += ball.speedX;
            ball.y += ball.speedY;

            // Ball collision with top and bottom walls
            if (ball.y - ball.radius <= 0 || ball.y + ball.radius >= canvas.height) {
                ball.speedY = -ball.speedY;
            }

            // Ball collision with player paddle
            if (ball.x - ball.radius <= player.x + player.width &&
                ball.y >= player.y &&
                ball.y <= player.y + player.height &&
                ball.speedX < 0) {

                // Calculate hit position on paddle (-1 to 1)
                const hitPos = (ball.y - (player.y + player.height / 2)) / (player.height / 2);
                const angle = hitPos * Math.PI / 4; // Max 45 degrees

                const speed = Math.sqrt(ball.speedX * ball.speedX + ball.speedY * ball.speedY);
                ball.speedX = Math.abs(Math.cos(angle) * speed);
                ball.speedY = Math.sin(angle) * speed;

                // Increase speed slightly
                ball.speedX = Math.min(ball.speedX * 1.05, ball.maxSpeed);
                ball.speedY = Math.min(Math.abs(ball.speedY) * 1.05, ball.maxSpeed) * Math.sign(ball.speedY);
            }

            // Ball collision with computer paddle
            if (ball.x + ball.radius >= computer.x &&
                ball.y >= computer.y &&
                ball.y <= computer.y + computer.height &&
                ball.speedX > 0) {

                // Calculate hit position on paddle (-1 to 1)
                const hitPos = (ball.y - (computer.y + computer.height / 2)) / (computer.height / 2);
                const angle = hitPos * Math.PI / 4; // Max 45 degrees

                const speed = Math.sqrt(ball.speedX * ball.speedX + ball.speedY * ball.speedY);
                ball.speedX = -Math.abs(Math.cos(angle) * speed);
                ball.speedY = Math.sin(angle) * speed;

                // Increase speed slightly
                ball.speedX = Math.max(ball.speedX * 1.05, -ball.maxSpeed);
                ball.speedY = Math.min(Math.abs(ball.speedY) * 1.05, ball.maxSpeed) * Math.sign(ball.speedY);
            }

            // Score detection
            if (ball.x - ball.radius <= 0) {
                // Computer scores
                game.computerScore++;
                updateScore();
                resetBall(1);
            } else if (ball.x + ball.radius >= canvas.width) {
                // Player scores
                game.playerScore++;
                updateScore();
                resetBall(-1);
            }

            // Check for game over
            if (game.playerScore >= game.maxScore || game.computerScore >= game.maxScore) {
                game.isOver = true;
            }
        }

        function resetBall(direction) {
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            ball.speedX = 5 * direction;
            ball.speedY = (Math.random() * 2 - 1) * 5;
        }

        function updateScore() {
            document.getElementById('playerScore').textContent = game.playerScore;
            document.getElementById('computerScore').textContent = game.computerScore;
        }

        function resetGame() {
            game.playerScore = 0;
            game.computerScore = 0;
            game.isOver = false;
            updateScore();
            resetBall(Math.random() > 0.5 ? 1 : -1);
            // Reset paddle positions
            player.y = canvas.height / 2 - paddleHeight / 2;
            computer.y = canvas.height / 2 - paddleHeight / 2;
        }

        // Game loop
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Start game
        resetBall(-1);
        gameLoop();
    </script>
</body>
</html>
